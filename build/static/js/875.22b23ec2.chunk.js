"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[875],{3843:function(e,n,i){i.d(n,{Xc:function(){return l},go:function(){return t}});var l=function(e){if(!e||null===e||void 0===e)return""===e||" "===e?e.trim():e;var n,i=[];if(e.split(" ").length<2)return!1;for(var l=0;l<e.split(" ").length;l++)""!==e.split(" ")[l]&&i.push(e.split(" ")[l]);if(i.length<2)return!1;for(l=0;l<=i.length;l++){if(l!==i.length){var t=i[l];n=n+" "+(t.slice(0,1).toUpperCase()+t.slice(1,t.length).toLowerCase()).trim()}if(l===i.length)return n.split("undefined")[1].trim()}},t=function(e){return""===e||null===e||void 0===e?""===e||" "===e?e.trim():e:2===e.split("@").length&&(!o(e.split("@")[1])&&!o(e.split("@")[0])&&(!(e.split("@")[1].split(".").length<=1)&&(""!==e.split("@")[1].split(".")[1]&&""!==e.split("@")[1].split(".")[0]&&!e.endsWith("."))))},o=function(e){return!!(e.includes("~")||e.includes("!")||e.includes("#")||e.includes("$")||e.includes("%")||e.includes("^")||e.includes("&")||e.includes("*")||e.includes("(")||e.includes(")")||e.includes("_")||e.includes("=")||e.includes("+")||e.includes("?")||e.includes("/")||e.includes(">")||e.includes(",")||e.includes("<")||e.includes("|")||e.includes("@"))}},6638:function(e,n){n.Z=function(e,n){401===e?n("Unathorized..."):400===e?n("Bad request..."):405===e?n("Method not allowed..."):403===e?n("Error, request not allowed..."):404===e?n("Error, server rejected..."):409===e?n("Similar identity exists"):500===e&&n("Internal error...")}},4875:function(e,n,i){i.r(n),i.d(n,{default:function(){return b}});var l=i(4165),t=i(1413),o=i(5861),d=i(885),r=i(5332),u=i(6638),s=i(4569),a=i.n(s),c=i(8781),v=i(408),f=i(2791),p=i(3465),h=i(6871),m=i(1352),g=i(3843),x=(i(4122),i(184)),Z=function(e){var n=e.setLogics,i=e.setFeedback,s=e.getData,m=e.feedback,g=(0,p.Z)(),Z=g.auth,w=g.setAuth,b=(0,f.useState)({showloading:!1}),j=(0,d.Z)(b,2),y=j[0],k=j[1],N=(0,h.s0)(),C=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var o,d,c,f,p;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==Z&&void 0!==Z&&Z.profilePicture&&""!==(null===Z||void 0===Z?void 0:Z.profilePicture)){e.next=4;break}i("No Display picture available"),e.next=16;break;case 4:return e.prev=4,k((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),e.next=8,null===a()||void 0===a()?void 0:a().put("".concat(v.C,"/user"),{action:"DP"},{withCredentials:!0});case 8:200===(null===(o=e.sent)||void 0===o?void 0:o.status)&&(w(null===o||void 0===o?void 0:o.data),s().then((function(){n((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1,showDeleteProfilePicturModal:!1})})),i("Display picture deleted successfully")}))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),null===(d=console)||void 0===d||d.log(e.t0),null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.response)&&void 0!==c&&c.data?401===(null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f?void 0:f.status)?(0,r.Z)(Z).then((function(e){var n,i;200===(null===e||void 0===e?void 0:e.status)?C():N("/".concat(null===Z||void 0===Z||null===(n=Z.stagenameInUrl)||void 0===n||null===(i=n.trim())||void 0===i?void 0:i.toLowerCase(),"/sign-out"))})):(k((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),(0,u.Z)(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p?void 0:p.status,i)):(k((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),i("Network challenges..."));case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(null===y||void 0===y?void 0:y.showloading)&&(0,x.jsx)(c.Z,{}),(0,x.jsxs)("main",{className:"modal-container",children:[(0,x.jsx)("div",{className:"feedback-container",style:m?{}:{backgroundColor:"transparent"},children:(0,x.jsxs)("div",{className:"feedback",children:[m,(0,x.jsx)("span",{style:{visibility:"hidden"},children:"."})]})}),(0,x.jsxs)("div",{className:"content-container",children:[(0,x.jsx)("div",{className:"close-button-container",children:(0,x.jsx)("button",{className:"close-Icon",onClick:function(e){e.preventDefault(),n((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showDeleteProfilePicturModal:!1})}))},children:"X"})}),(0,x.jsxs)("div",{className:"content",children:[(0,x.jsx)("div",{children:"Surely delete display picture ?"}),(0,x.jsxs)("div",{className:"decision-buttons-container",children:[(0,x.jsx)("button",{onClick:function(e){e.preventDefault(),C()},children:"Yes"}),(0,x.jsx)("button",{onClick:function(){n((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showDeleteProfilePicturModal:!1})}))},children:"Cancel"})]})]})]})]})]})},w=i(6355),b=(i(6477),i(469),function(){var e=(0,p.Z)(),n=e.auth,i=e.setAuth,s=(0,h.s0)(),b=(0,f.useState)(""),j=(0,d.Z)(b,2),y=j[0],k=j[1],N=(0,f.useState)({showloading:!1,showGenderOptionsBtns:!1,editMode:!1,showDeleteProfilePicturModal:!1}),C=(0,d.Z)(N,2),P=C[0],D=C[1],B=(0,f.useState)(""),E=(0,d.Z)(B,2),I=E[0],O=E[1],M=(0,f.useState)(""),S=(0,d.Z)(M,2),U=S[0],L=S[1],G=(0,f.useState)(""),F=(0,d.Z)(G,2),T=F[0],q=F[1],R=["Male","Female"],z={valid:"white",error:"rgb(255, 71, 86)"},V=(0,f.useRef)([]),A=(0,f.useRef)(),X=function(e){var n,i;!e||null!==V&&void 0!==V&&null!==(n=V.current)&&void 0!==n&&n.includes(e)||(null===V||void 0===V||null===(i=V.current)||void 0===i||i.push(e))},W=(0,f.useCallback)((0,o.Z)((0,l.Z)().mark((function e(){var i,o,d,c,f,p;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),e.next=4,a().get("".concat(v.C,"/user"),{withCredentials:!0});case 4:if(200!==(null===(i=e.sent)||void 0===i?void 0:i.status)){e.next=10;break}return k(null===i||void 0===i?void 0:i.data),O(null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.phone),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),e.abrupt("return",null===i||void 0===i?void 0:i.status);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),null===(d=console)||void 0===d||d.log(e.t0),null!==e.t0&&void 0!==e.t0&&null!==(c=e.t0.response)&&void 0!==c&&c.data?401===(null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f?void 0:f.status)?(0,r.Z)(n).then((function(e){var i,l;200===(null===e||void 0===e?void 0:e.status)?W():s("/".concat(null===n||void 0===n||null===(i=n.stagenameInUrl)||void 0===i||null===(l=i.trim())||void 0===l?void 0:l.toLowerCase(),"/sign-out"))})):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),(0,u.Z)(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p?void 0:p.status,L)):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),L("Network challenges..."));case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),[n,s]);(0,f.useEffect)((function(){W()}),[W]),(0,f.useEffect)((function(){U&&setTimeout((function(){L("")}),3e3)}),[U]);var H=function(){var e=(0,o.Z)((0,l.Z)().mark((function e(){var o,d,c,f,p,h,x,Z,w,b,j,y,k,N,C,B,E,O,M,S,U,G,F,T;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=!1,null===P||void 0===P||!P.showGenderOptionsBtns){e.next=5;break}L("Select gender"),e.next=21;break;case 5:if(!0,null===V||void 0===V||null===(h=V.current)||void 0===h||h.forEach((function(e){"email"!==(null===e||void 0===e?void 0:e.className)&&""===(null===e||void 0===e?void 0:e.value)&&L("Enter required fields"),"gender"!==(null===e||void 0===e?void 0:e.className)&&"stagename"!==(null===e||void 0===e?void 0:e.className)&&"fullname"!==(null===e||void 0===e?void 0:e.className)||(""===(null===e||void 0===e?void 0:e.value)?e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.error):e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.valid)),"fullname"===(null===e||void 0===e?void 0:e.className)&&((0,g.Xc)(null===e||void 0===e?void 0:e.value)?(e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.valid),o=!0):(L("Invalid fullname"),e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.error))),"email"===(null===e||void 0===e?void 0:e.className)&&null!==e&&void 0!==e&&e.value&&(p=!0,(0,g.go)(null===e||void 0===e?void 0:e.value)?(e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.valid),d=!0):(e.style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.error),L("Invalid email"))),"stagename"===(null===e||void 0===e?void 0:e.className)&&""!==(null===e||void 0===e?void 0:e.value)&&(c=!0)})),I?(0,m.yf)(I)?(document.getElementsByClassName("PhoneInput")[0].style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.valid),f=!0):(L("Invalid number"),document.getElementsByClassName("PhoneInput")[0].style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.error)):(L("Enter required fields"),document.getElementsByClassName("PhoneInput")[0].style.borderBottom="3px solid ".concat(null===z||void 0===z?void 0:z.error)),!(o&&(!p||p&&d)&&c&&f)){e.next=21;break}return e.prev=9,D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),e.next=13,null===a()||void 0===a()?void 0:a().post("".concat(v.C,"/user"),{fullname:null===V||void 0===V||null===(x=V.current[0])||void 0===x?void 0:x.value.trim(),phone:I.trim(),gender:null===V||void 0===V||null===(Z=V.current[2])||void 0===Z?void 0:Z.value.trim(),stagename:null===V||void 0===V||null===(w=V.current[3])||void 0===w?void 0:w.value.trim(),email:null===V||void 0===V||null===(b=V.current[4])||void 0===b?void 0:b.value.trim()},{withCredentials:!0});case 13:200===(null===(j=e.sent)||void 0===j?void 0:j.status)?(i({accessToken:null===j||void 0===j||null===(y=j.data)||void 0===y?void 0:y.accessToken,id:null===n||void 0===n?void 0:n.id,stagename:null===j||void 0===j||null===(k=j.data)||void 0===k?void 0:k.stagename,stagenameInUrl:null===j||void 0===j||null===(N=j.data)||void 0===N?void 0:N.stagenameInUrl,profilePicture:null===j||void 0===j||null===(C=j.data)||void 0===C?void 0:C.profilePicture,websiteCreated:null===j||void 0===j||null===(B=j.data)||void 0===B?void 0:B.websiteCreated}),s("/".concat(null===j||void 0===j||null===(E=j.data)||void 0===E||null===(O=E.stagenameInUrl)||void 0===O||null===(M=O.trim())||void 0===M?void 0:M.toLowerCase(),"/settings")),null===V||void 0===V||null===(S=V.current)||void 0===S||S.forEach((function(e){e.readOnly=!0})),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1,editMode:!1})})),L("Saved successfully")):204===(null===j||void 0===j?void 0:j.status)&&(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),L("Could not save, try again later")),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(9),null===(U=console)||void 0===U||U.log(e.t0),null!==e.t0&&void 0!==e.t0&&null!==(G=e.t0.response)&&void 0!==G&&G.data?401===(null===e.t0||void 0===e.t0||null===(F=e.t0.response)||void 0===F?void 0:F.status)?(0,r.Z)(n).then((function(e){var i,l;200===(null===e||void 0===e?void 0:e.status)?H():s("/".concat(null===n||void 0===n||null===(i=n.stagenameInUrl)||void 0===i||null===(l=i.trim())||void 0===l?void 0:l.toLowerCase(),"/sign-out"))})):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),(0,u.Z)(null===e.t0||void 0===e.t0||null===(T=e.t0.response)||void 0===T?void 0:T.status,L)):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),L("Network challenges..."));case 21:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(){return e.apply(this,arguments)}}(),Y=function e(){null===V||void 0===V||V.current.forEach(function(){var d=(0,o.Z)((0,l.Z)().mark((function o(d){var c,f,p,h,m,g,x;return(0,l.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if("file"!==d.type){l.next=22;break}if(!(d.size>5242880)){l.next=5;break}L("Image size too large"),l.next=22;break;case 5:if(0===(null===d||void 0===d||null===(c=d.files)||void 0===c?void 0:c.length)){l.next=22;break}return q((function(e){return(0,t.Z)((0,t.Z)({},e),{},{url:URL.createObjectURL(d.files[0]),image:d.files[0]})})),null===(f=new FormData)||void 0===f||f.append("file",null===d||void 0===d?void 0:d.files[0]),null===f||void 0===f||f.append("image",T),l.prev=10,D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),l.next=14,null===a()||void 0===a()?void 0:a().post("".concat(v.C,"/user"),f,{withCredentials:!0});case 14:200===(null===(p=l.sent)||void 0===p?void 0:p.status)&&(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),i((function(e){var n;return(0,t.Z)((0,t.Z)({},e),{},{profilePicture:null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.profilePicture})})),W().then((function(e){200===e&&(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showDeleteProfilePicturModal:!1})})),L("Display picture saved successfully"))}))),l.next=22;break;case 18:l.prev=18,l.t0=l.catch(10),null===(h=console)||void 0===h||h.log(l.t0),null!==l.t0&&void 0!==l.t0&&null!==(m=l.t0.response)&&void 0!==m&&m.data?401===(null===l.t0||void 0===l.t0||null===(g=l.t0.response)||void 0===g?void 0:g.status)?(0,r.Z)(n).then((function(i){var l,t;200===(null===i||void 0===i?void 0:i.status)?e():s("/".concat(null===n||void 0===n||null===(l=n.stagenameInUrl)||void 0===l||null===(t=l.trim())||void 0===t?void 0:t.toLowerCase(),"/sign-out"))})):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),(0,u.Z)(null===l.t0||void 0===l.t0||null===(x=l.t0.response)||void 0===x?void 0:x.status,L)):(D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),L("Network challenges..."));case 22:case"end":return l.stop()}}),o,null,[[10,18]])})));return function(e){return d.apply(this,arguments)}}())};return(0,f.useEffect)((function(){U&&setTimeout((function(){L("")}),3e3)}),[U]),(0,x.jsxs)(x.Fragment,{children:[(null===P||void 0===P?void 0:P.showloading)&&(0,x.jsx)(c.Z,{}),(null===P||void 0===P?void 0:P.showDeleteProfilePicturModal)&&(0,x.jsx)(Z,{setFeedback:L,setLogics:D,getData:W}),(0,x.jsxs)("main",{className:"settings",style:{paddingTop:"40px"},children:[(0,x.jsx)("div",{className:"reset-password-request-btn",children:null!==n&&void 0!==n&&n.profilePicture&&""!==(null===n||void 0===n?void 0:n.profilePicture)?(0,x.jsxs)("div",{children:[(0,x.jsx)("button",{onClick:function(e){var n;e.preventDefault(),null===V||void 0===V||null===(n=V.current)||void 0===n||n.find((function(e){return"file"===(null===e||void 0===e?void 0:e.type)})).click()},children:"Change DP"}),(0,x.jsx)("button",{onClick:function(e){e.preventDefault(),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showDeleteProfilePicturModal:!0})}))},children:"Remove DP"})]}):(0,x.jsx)("button",{onClick:function(e){var n;e.preventDefault(),null===V||void 0===V||null===(n=V.current)||void 0===n||n.find((function(e){return"file"===(null===e||void 0===e?void 0:e.type)})).click()},children:"Upload DP"})}),(0,x.jsx)("div",{className:"feedback-container",style:U?{margin:"0px",position:"relative",top:"-5px"}:{backgroundColor:"transparent",margin:"0px"},children:(0,x.jsxs)("div",{className:"feedback",children:[(0,x.jsx)("span",{style:{visibility:"hidden"},children:"."}),U]})}),""!==(null===y||void 0===y?void 0:y.length)&&(0,x.jsxs)("section",{className:"general-settings",children:[(0,x.jsxs)("div",{className:"image-container",children:[""!==(null===y||void 0===y?void 0:y.profilePicture)&&void 0!==(null===y||void 0===y?void 0:y.profilePicture)&&null!==(null===y||void 0===y?void 0:y.profilePicture)&&(0,x.jsx)("img",{alt:"",src:null===y||void 0===y?void 0:y.profilePicture}),!(""!==(null===y||void 0===y?void 0:y.profilePicture)&&void 0!==(null===y||void 0===y?void 0:y.profilePicture)&&null!==(null===y||void 0===y?void 0:y.profilePicture))&&(0,x.jsx)(w.m3W,{size:"30px"})]}),(0,x.jsx)("div",{className:"heading",children:"Account details"}),(0,x.jsx)("div",{className:"label",children:"Full name"}),(0,x.jsx)("div",{className:"input-container",children:(0,x.jsx)("input",{className:"fullname",ref:X,defaultValue:null===y||void 0===y?void 0:y.fullname,readOnly:!0})}),(0,x.jsx)("div",{className:"label",children:"Phone"}),(0,x.jsx)("div",{className:"input-container",ref:A,children:(0,x.jsx)(m.ZP,{onChange:O,defaultCountry:"GH",ref:X,value:I,readOnly:!0})}),(0,x.jsx)("div",{className:"label",children:"Gender"}),(0,x.jsxs)("div",{className:"input-container",children:[(0,x.jsx)("input",{readOnly:!0,style:null!==P&&void 0!==P&&P.showGenderOptionsBtns?{height:"0px",width:"0px",visibility:"hidden",overflow:"hidden",opacity:"0"}:{},className:"gender",ref:X,defaultValue:null===y||void 0===y?void 0:y.gender,onChange:function(e){"Tab"!==e.key&&D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showGenderOptionsBtns:!0})}))}}),(null===P||void 0===P?void 0:P.showGenderOptionsBtns)&&(0,x.jsx)("div",{className:"genderOptionsBtns-container",children:null===R||void 0===R?void 0:R.map((function(e,n){return(0,x.jsx)("button",{onClick:function(n){n.preventDefault(),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showGenderOptionsBtns:!1})})),V.current[2].value=e},children:e},n)}))})]}),(0,x.jsx)("div",{className:"label",children:"Stage name"}),(0,x.jsx)("div",{className:"input-container",children:(0,x.jsx)("input",{className:"stagename",ref:X,defaultValue:null===y||void 0===y?void 0:y.stagename,readOnly:!0})}),(0,x.jsx)("div",{className:"label",children:"Email"}),(0,x.jsx)("div",{className:"input-container",children:(0,x.jsx)("input",{className:"email",ref:X,defaultValue:null===y||void 0===y?void 0:y.email,readOnly:!0})}),(null===P||void 0===P?void 0:P.editMode)&&(0,x.jsxs)("div",{className:"decision-buttons-container",children:[(0,x.jsx)("button",{onClick:function(e){e.preventDefault(),H()},children:"Save"}),(0,x.jsx)("button",{onClick:function(e){var n;e.preventDefault(),null===V||void 0===V||null===(n=V.current)||void 0===n||n.forEach((function(e){e.readOnly=!0})),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{editMode:!1})}))},children:"Cancel"})]}),!(null!==P&&void 0!==P&&P.editMode)&&(0,x.jsx)("div",{className:"decision-buttons-container",children:(0,x.jsx)("button",{onClick:function(e){var n,i;e.preventDefault(),null===V||void 0===V||null===(n=V.current)||void 0===n||n.forEach((function(e){e.readOnly=!1})),D((function(e){return(0,t.Z)((0,t.Z)({},e),{},{editMode:!0})})),null===V||void 0===V||null===(i=V.current[0])||void 0===i||i.focus()},children:"Click here to edit"})})]}),(0,x.jsx)("section",{children:(0,x.jsx)("div",{className:"input-container",style:{height:"0px",width:"0px",overflow:"0px",visibility:"hidden",opacity:"0"},children:(0,x.jsx)("input",{type:"file",ref:X,onChange:function(e){Y()},accept:".jpg,.jpeg,.png,.svg,.heic",style:{height:"0px",width:"0px",overflow:"0px",visibility:"hidden",opacity:"0"}})})})]})]})})},4122:function(){},469:function(){}}]);
//# sourceMappingURL=875.22b23ec2.chunk.js.map