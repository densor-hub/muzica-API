"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[576],{5858:function(n,e,o){o.d(e,{MH:function(){return s},Nd:function(){return l},Wh:function(){return d},xm:function(){return i}});var i=function(n){return!!(n.includes("A")||n.includes("B")||n.includes("C")||n.includes("D")||n.includes("E")||n.includes("F")||n.includes("G")||n.includes("H")||n.includes("I")||n.includes("J")||n.includes("K")||n.includes("L")||n.includes("M")||n.includes("N")||n.includes("O")||n.includes("P")||n.includes("Q")||n.includes("R")||n.includes("S")||n.includes("T")||n.includes("U")||n.includes("V")||n.includes("W")||n.includes("X")||n.includes("Y")||n.includes("Z"))},l=function(n){return!!(n.includes("a")||n.includes("b")||n.includes("c")||n.includes("d")||n.includes("e")||n.includes("f")||n.includes("g")||n.includes("h")||n.includes("i")||n.includes("j")||n.includes("k")||n.includes("l")||n.includes("m")||n.includes("n")||n.includes("o")||n.includes("p")||n.includes("q")||n.includes("r")||n.includes("s")||n.includes("t")||n.includes("u")||n.includes("v")||n.includes("w")||n.includes("x")||n.includes("y")||n.includes("z"))},s=function(n){return!!(n.includes("~")||n.includes("!")||n.includes("@")||n.includes("#")||n.includes("$")||n.includes("%")||n.includes("^")||n.includes("&")||n.includes("*")||n.includes("(")||n.includes(")")||n.includes("-")||n.includes("_")||n.includes("=")||n.includes("+")||n.includes("?")||n.includes("/")||n.includes(".")||n.includes(">")||n.includes(",")||n.includes("<")||n.includes("|")||n.includes("\xa3")||n.includes("`")||n.includes("[")||n.includes("{")||n.includes("]")||n.includes("}")||n.includes("|"))},d=function(n){return!!(String(n).includes("0")||String(n).includes("1")||String(n).includes("2")||String(n).includes("3")||String(n).includes("4")||String(n).includes("5")||String(n).includes("6")||String(n).includes("7")||String(n).includes("8")||String(n).includes("9"))}},6638:function(n,e){e.Z=function(n,e){401===n?e("Unathorized..."):400===n?e("Bad request..."):405===n?e("Method not allowed..."):403===n?e("Error, request not allowed..."):404===n?e("Error, server rejected..."):409===n?e("Similar identity exists"):500===n&&e("Internal error...")}},4576:function(n,e,o){o.r(e);var i=o(4165),l=o(1413),s=o(5861),d=o(9439),r=o(2791),u=o(5332),t=o(6638),c=o(4569),a=o.n(c),v=o(8781),w=o(3465),p=o(5858),h=o(9126),f=o(7689),x=(o(469),o(408)),m=o(184);e.default=function(){var n,e,o=(0,r.useState)(""),c=(0,d.Z)(o,2),g=c[0],Z=c[1],j=(0,r.useState)({previousPassword:"",newPassword:"",confirmNewPassword:"",gender:""}),P=(0,d.Z)(j,2),N=P[0],b=P[1],y=(0,r.useState)({showloading:!1,showpassword:!1,showPreviosPassword:!1,showNewPassword:!1,showconfirmNewPassword:!1}),C=(0,d.Z)(y,2),k=C[0],S=C[1],B=(0,w.Z)().auth,D=(0,f.s0)(),E={valid:"white",error:"rgb(255, 71, 86)"},M=(0,r.useState)(!1),I=(0,d.Z)(M,2),W=I[0],z=I[1],H=(0,r.useRef)([]),U=function(n){var e,o,i;!n||null!==H&&void 0!==H&&null!==(e=H.current)&&void 0!==e&&e.includes(n)?null===H||void 0===H||null===(o=H.current)||void 0===o||o.pop(n):null===H||void 0===H||null===(i=H.current)||void 0===i||i.push(n)},$=(0,r.useCallback)((0,s.Z)((0,i.Z)().mark((function n(){var e,o,s,d;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!0})})),n.next=4,a().get("".concat(x.C,"/reset-password"),{withCredentials:!0});case 4:200===(null===(e=n.sent)||void 0===e?void 0:e.status)&&(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),z(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.loginWithNoPassword)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),401===(null===n.t0||void 0===n.t0||null===(s=n.t0.response)||void 0===s?void 0:s.status)?(0,u.Z)(B).then((function(n){var e,o;200===(null===n||void 0===n?void 0:n.status)?$():D("/".concat(null===B||void 0===B||null===(e=B.stagenameInUrl)||void 0===e||null===(o=e.trim())||void 0===o?void 0:o.toLowerCase(),"/sign-out"))})):(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),(0,t.Z)(null===n.t0||void 0===n.t0||null===(d=n.t0.response)||void 0===d?void 0:d.status,Z));case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))),[D,B]);(0,r.useEffect)((function(){$()}),[$]);var q=function(){var n=(0,s.Z)((0,i.Z)().mark((function n(){var e,o,s,d,r,c,v,w,h,f,m,g,j,P,N,b,y,C,k,M,I,z,U;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=[],null===H||void 0===H||null===(e=H.current)||void 0===e||e.forEach((function(n){var e;(console.log(n),""===(null===n||void 0===n?void 0:n.value)&&(Z("Enter all fields"),n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),null===o||void 0===o||o.push(n)),""!==(null===n||void 0===n?void 0:n.value))?(null===n||void 0===n||null===(e=n.value)||void 0===e?void 0:e.length)<8?(n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),null===o||void 0===o||o.push(n),Z("Invalid entry")):(0,p.Wh)(null===n||void 0===n?void 0:n.value)&&(0,p.xm)(null===n||void 0===n?void 0:n.value)&&(0,p.Nd)(null===n||void 0===n?void 0:n.value)||(0,p.MH)(null===n||void 0===n?void 0:n.value)&&(0,p.xm)(null===n||void 0===n?void 0:n.value)&&(0,p.Nd)(null===n||void 0===n?void 0:n.value)||(0,p.Wh)(null===n||void 0===n?void 0:n.value)&&(0,p.xm)(null===n||void 0===n?void 0:n.value)&&(0,p.Nd)(null===n||void 0===n?void 0:n.value)&&(0,p.MH)(null===n||void 0===n?void 0:n.value)?n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.valid):Z("password incorrect"):(n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),null===o||void 0===o||o.push(n))})),0!==(null===o||void 0===o?void 0:o.length)){n.next=25;break}if(s=!1,W?(null===H||void 0===H||null===(w=H.current[0])||void 0===w?void 0:w.value)!==(null===H||void 0===H||null===(h=H.current[1])||void 0===h?void 0:h.value)?(Z("Password mismatch"),H.current[0].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),H.current[1].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error)):s=!0:(null===H||void 0===H||null===(d=H.current[0])||void 0===d?void 0:d.value)===(null===H||void 0===H||null===(r=H.current[1])||void 0===r?void 0:r.value)?(Z("Previous and new passwords are the same"),H.current[0].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),H.current[1].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error)):(null===H||void 0===H||null===(c=H.current[1])||void 0===c?void 0:c.value)!==(null===H||void 0===H||null===(v=H.current[2])||void 0===v?void 0:v.value)?(Z("Password mismatch"),H.current[1].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error),H.current[2].style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.error)):s=!0,n.prev=5,W||!s){n.next=13;break}return S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!0})})),n.next=10,a().post("".concat(x.C,"/reset-password"),{previousPassword:null===H||void 0===H||null===(j=H.current[0])||void 0===j?void 0:j.value,newPassword:null===H||void 0===H||null===(P=H.current[1])||void 0===P?void 0:P.value,confirmNewPassword:null===H||void 0===H||null===(N=H.current[2])||void 0===N?void 0:N.value},{withCredentials:!0});case 10:g=n.sent,n.next=18;break;case 13:if(!W||!s){n.next=18;break}return S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!0})})),n.next=17,a().post("".concat(x.C,"/reset-password"),{newPassword:null===H||void 0===H||null===(b=H.current[0])||void 0===b?void 0:b.value,confirmNewPassword:null===H||void 0===H||null===(y=H.current[1])||void 0===y?void 0:y.value},{withCredentials:!0});case 17:g=n.sent;case 18:200===(null===(f=g)||void 0===f?void 0:f.status)?(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),Z("Password changed successfully"),H.current.forEach((function(n){n.value="",n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.valid)}))):204===(null===(m=g)||void 0===m?void 0:m.status)&&(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),Z("Invalid previous password")),n.next=25;break;case 21:n.prev=21,n.t0=n.catch(5),null===(C=console)||void 0===C||C.log(n.t0),null!==n.t0&&void 0!==n.t0&&null!==(k=n.t0.response)&&void 0!==k&&k.data?502===(null===n.t0||void 0===n.t0||null===(M=n.t0.response)||void 0===M?void 0:M.status)?(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),Z("Could not send code, try again later")):406===(null===n.t0||void 0===n.t0||null===(I=n.t0.response)||void 0===I?void 0:I.status)?(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),Z("Add phone number and gender first")):401===(null===n.t0||void 0===n.t0||null===(z=n.t0.response)||void 0===z?void 0:z.status)?(0,u.Z)(B).then((function(n){var e,o;200===(null===n||void 0===n?void 0:n.status)?q():D("/".concat(null===B||void 0===B||null===(e=B.stagenameInUrl)||void 0===e||null===(o=e.trim())||void 0===o?void 0:o.toLowerCase(),"/sign-out"))})):(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),(0,t.Z)(null===n.t0||void 0===n.t0||null===(U=n.t0.response)||void 0===U?void 0:U.status,Z)):(S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showloading:!1})})),Z("Network challenges..."));case 25:case"end":return n.stop()}}),n,null,[[5,21]])})));return function(){return n.apply(this,arguments)}}();return(0,r.useEffect)((function(){g&&setTimeout((function(){Z("")}),3e3)})),(0,m.jsxs)(m.Fragment,{children:[(null===k||void 0===k?void 0:k.showloading)&&(0,m.jsx)(v.Z,{}),(0,m.jsxs)("main",{className:"settings",style:{paddingTop:"40px"},children:[(0,m.jsx)("div",{className:"feedback-container",style:g?{margin:"0px"}:{backgroundColor:"transparent",margin:"0px"},children:(0,m.jsxs)("div",{className:"feedback",children:[(0,m.jsx)("span",{style:{visibility:"hidden"},children:"."}),g]})}),(0,m.jsx)("div",{className:"reset-password-heading",children:"Reset Password"}),(0,m.jsx)("div",{}),(0,m.jsx)("section",{className:"general-settings reset-password",children:(0,m.jsxs)("form",{children:[!W&&(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"label",children:"Current password"}),(0,m.jsxs)("div",{className:"input-container",children:[(0,m.jsx)("input",{className:"previous-password",ref:U,onChange:function(n){b((function(e){var o;return(0,l.Z)((0,l.Z)({},e),{},{previousPassword:null===n||void 0===n||null===(o=n.target)||void 0===o?void 0:o.value})}))},placeholder:"Current password",type:"password",autoComplete:"current-password"}),(0,m.jsx)("span",{children:null!==k&&void 0!==k&&k.showPreviosPassword?(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showPreviosPassword:!1})})),H.current[0].type="password"},children:(0,m.jsx)(h.$ge,{})}):(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showPreviosPassword:!0})})),H.current[0].type="text"},children:(0,m.jsx)(h.z0y,{})})})]})]}),(0,m.jsx)("div",{className:"label",children:"New password"}),(0,m.jsxs)("div",{className:"input-container",children:[(0,m.jsx)("input",{className:"new-password",ref:U,onChange:function(n){b((function(e){var o;return(0,l.Z)((0,l.Z)({},e),{},{newPassword:null===n||void 0===n||null===(o=n.target)||void 0===o?void 0:o.value})}))},placeholder:"new password",type:"password",autoComplete:"current-password"}),(0,m.jsx)("span",{children:null!==k&&void 0!==k&&k.showNewPassword?(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showNewPassword:!1})})),H.current[1].type="password"},children:(0,m.jsx)(h.$ge,{})}):(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showNewPassword:!0})})),H.current[1].type="text"},children:(0,m.jsx)(h.z0y,{})})})]}),(null===N||void 0===N||null===(n=N.newPassword)||void 0===n?void 0:n.length)>0&&(0,m.jsxs)("div",{className:"directive",children:[(null===N||void 0===N||null===(e=N.newPassword)||void 0===e?void 0:e.length)<8&&(0,m.jsx)("section",{className:"inputDirectives",children:"- 8 or more characters"}),!((0,p.MH)(null===N||void 0===N?void 0:N.newPassword)||(0,p.Wh)(null===N||void 0===N?void 0:N.newPassword))&&(0,m.jsx)("section",{children:"- Must include symbols or numbers"}),(!(0,p.Nd)(null===N||void 0===N?void 0:N.newPassword)||!(0,p.xm)(null===N||void 0===N?void 0:N.newPassword))&&(0,m.jsx)("section",{children:"- Must contain lowercase and uppercase"})]}),(0,m.jsx)("div",{className:"label",children:"Confirm new password"}),(0,m.jsxs)("div",{className:"input-container",children:[(0,m.jsx)("input",{className:"confirm-password",onChange:function(n){b((function(e){var o;return(0,l.Z)((0,l.Z)({},e),{},{confirmNewPassword:null===n||void 0===n||null===(o=n.target)||void 0===o?void 0:o.value})}))},placeholder:"confirm new password",ref:U,type:"password",autoComplete:"current-password"}),(0,m.jsx)("span",{children:null!==k&&void 0!==k&&k.showconfirmNewPassword?(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showconfirmNewPassword:!1})})),H.current[2].type="password"},children:(0,m.jsx)(h.$ge,{})}):(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),S((function(n){return(0,l.Z)((0,l.Z)({},n),{},{showconfirmNewPassword:!0})})),H.current[2].type="text"},children:(0,m.jsx)(h.z0y,{})})})]}),(null===N||void 0===N?void 0:N.confirmNewPassword.length)>0&&(0,m.jsx)("div",{className:"directive",children:(null===N||void 0===N?void 0:N.confirmNewPassword.length)>0&&(null===N||void 0===N?void 0:N.newPassword)!==(null===N||void 0===N?void 0:N.confirmNewPassword)&&(0,m.jsx)("section",{className:"inputDirectives",children:"- Must match new password"})}),(0,m.jsxs)("div",{className:"decision-buttons-container",children:[(0,m.jsx)("button",{onClick:function(n){n.preventDefault(),q()},children:"Save"}),(0,m.jsx)("button",{onClick:function(n){var e;n.preventDefault(),null===H||void 0===H||null===(e=H.current)||void 0===e||e.forEach((function(n){n.value="",n.style.borderBottom="3px solid ".concat(null===E||void 0===E?void 0:E.valid)}))},children:"Cancel"})]})]})})]})]})}},469:function(){}}]);
//# sourceMappingURL=576.2ee78018.chunk.js.map