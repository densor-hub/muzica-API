"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[567],{6638:function(e,n){n.Z=function(e,n){401===e?n("Unathorized..."):400===e?n("Bad request..."):405===e?n("Method not allowed..."):403===e?n("Error, request not allowed..."):404===e?n("Error, server rejected..."):409===e?n("Similar identity exists"):500===e&&n("Internal error...")}},2567:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var i=t(4165),l=t(1413),s=t(5861),r=t(885),o=t(4569),a=t.n(o),d=t(2791),c=t(408),u=t(3465),v=t(6638),h=t(8781),f=t(5332),g=t(6871),p=(t(7108),t(6477),t(184)),x=function(){var e=(0,u.Z)().auth,n=(0,g.s0)(),t=(0,d.useState)(""),o=(0,r.Z)(t,2),x=o[0],j=o[1],m=(0,d.useState)(""),w=(0,r.Z)(m,2),b=w[0],Z=w[1],k=(0,d.useState)({showloading:!1}),C=(0,r.Z)(k,2),y=C[0],N=C[1],S=(0,d.useRef)(),U=function(){var t=(0,s.Z)((0,i.Z)().mark((function t(){var s,r,o,d,u,h;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(s=new FormData)||void 0===s||s.append("file",x[0]),null===s||void 0===s||s.append("not_current_content",!0),!((null===x||void 0===x?void 0:x.length)>0)){t.next=17;break}return N((function(e){return(0,l.Z)((0,l.Z)({},e),{},{showloading:!0})})),t.prev=5,t.next=8,a().post("".concat(c.C,"/save-image"),s,{withCredentials:!0});case 8:200===t.sent.status&&n("/".concat(null===e||void 0===e||null===(r=e.stagenameInUrl)||void 0===r||null===(o=r.trim())||void 0===o?void 0:o.toLowerCase(),"/added-images")),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),null!==t.t0&&void 0!==t.t0&&null!==(d=t.t0.response)&&void 0!==d&&d.data?401===(null===t.t0||void 0===t.t0||null===(u=t.t0.response)||void 0===u?void 0:u.status)?(0,f.Z)(e).then((function(t){var i,l;200===t.status?U():n("/".concat(null===e||void 0===e||null===(i=e.stagenameInUrl)||void 0===i||null===(l=i.trim())||void 0===l?void 0:l.toLowerCase(),"/sign-out"))})):((0,v.Z)(null===t.t0||void 0===t.t0||null===(h=t.t0.response)||void 0===h?void 0:h.status,Z),N((function(e){return(0,l.Z)((0,l.Z)({},e),{},{showloading:!1})}))):(N((function(e){return(0,l.Z)((0,l.Z)({},e),{},{showloading:!1})})),Z("Network error..."));case 15:t.next=18;break;case 17:Z("Select image");case 18:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(){return t.apply(this,arguments)}}();return(0,d.useEffect)((function(){b&&setTimeout((function(){Z("")}),3e3)}),[b]),(0,p.jsx)(p.Fragment,{children:y.showloading?(0,p.jsx)(h.Z,{}):(0,p.jsxs)("main",{children:[(0,p.jsx)("div",{className:"feedback-container",style:b?{}:{backgroundColor:"transparent"},children:(0,p.jsxs)("div",{className:"feeback",children:[" ",(0,p.jsx)("span",{style:{visibility:"hidden"},children:"."}),b]})}),(0,p.jsxs)("div",{className:"page-heading",children:["ADD NEW ",(0,p.jsx)("i",{children:(0,p.jsx)("b",{children:"IMAGE"})})]}),0===x.length&&(0,p.jsx)("section",{children:(0,p.jsx)("section",{className:"add-images",children:(0,p.jsx)("form",{children:(0,p.jsx)("table",{children:(0,p.jsxs)("tbody",{children:[(0,p.jsx)("tr",{children:(0,p.jsxs)("td",{children:[(0,p.jsx)("label",{children:"Select images"})," "]})}),(0,p.jsx)("tr",{children:(0,p.jsxs)("td",{children:[(0,p.jsx)("input",{style:{width:"0px",height:"0px",overflow:"hidden"},type:"file",accept:".png,.jpg,.jpeg,.svg",ref:S,onChange:function(e){!function(e){if(e.target.files.length>5)Z("Select not more than 5 files");else for(var n=0;n<=e.target.files.length;n++){var t,i;n!==e.target.files.length&&((null===e||void 0===e||null===(t=e.target)||void 0===t||null===(i=t.files[n])||void 0===i?void 0:i.size)>5242880?Z("File size too large"):j([e.target.files[n]]))}}(e)}}),(0,p.jsx)("button",{className:"upload-image",onClick:function(e){var n;e.preventDefault(),null===S||void 0===S||null===(n=S.current)||void 0===n||n.click()},children:"Upload"})]})})]})})})})}),x.length>0&&(0,p.jsxs)("section",{children:[(0,p.jsx)("div",{className:"image-viewer",children:x.length>0&&(0,p.jsx)("img",{alt:"",src:x[0]&&URL.createObjectURL(x[0])})}),(0,p.jsxs)("section",{className:"decision-buttons",style:{textAlign:"center"},children:[(null===x||void 0===x?void 0:x.length)>0&&(0,p.jsx)("button",{onClick:function(e){e.preventDefault(),U()},children:"Save"}),(null===x||void 0===x?void 0:x.length)>0&&(0,p.jsx)("button",{onClick:function(t){var i,l;t.preventDefault(),n("/".concat(null===e||void 0===e||null===(i=e.stagenameInUrl)||void 0===i||null===(l=i.trim())||void 0===l?void 0:l.toLowerCase(),"/added-images"))},children:"Cancel"})]})]})]})})}},7108:function(){}}]);
//# sourceMappingURL=567.df5a1260.chunk.js.map