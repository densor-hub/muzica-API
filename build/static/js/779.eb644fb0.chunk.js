"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[779],{3495:function(e,l,i){i.d(l,{fX:function(){return n},qb:function(){return t}});var n=function(e){var l=null===e||void 0===e?void 0:e.trim();if(null===l||void 0===l)return!1;var i=l.split("-")[0],n=Number(l.split("-")[1])-1,o=l.split("-")[2],d="".concat((new Date).getFullYear()),r="".concat((new Date).getMonth()),a="".concat((new Date).getDate());if(!t(l))return!1;if(Number(i)>Number(d))return!0;if(Number(i)<Number(d))return!1;if(Number(i)===Number(d)){if(Number(n>Number(r)))return!0;if(Number(n<Number(r)))return!1;if(Number(n)===Number(r)){if(Number(o)>=Number(a))return!0;if(Number(o)<Number(a))return!1}}},t=function(e){var l,i,n,t=e.trim(),o=t.split("-")[0],d=t.split("-")[1],r=t.split("-")[2];return!(!Number(o)||!Number(d)||!Number(r)||4!==(null===o||void 0===o?void 0:o.length)||null!==(l=String(o))&&void 0!==l&&l.startsWith("0")||Number(d)>12||Number(d<=0)||2!==(null===(i=String(d))||void 0===i?void 0:i.length)||r>31||Number(r<=0)||2!==(null===(n=String(r))||void 0===n?void 0:n.length))}},6638:function(e,l){l.Z=function(e,l){401===e?l("Unathorized..."):400===e?l("Bad request..."):405===e?l("Method not allowed..."):403===e?l("Error, request not allowed..."):404===e?l("Error, server rejected..."):409===e?l("Similar identity exists"):500===e&&l("Internal error...")}},3779:function(e,l,i){i.r(l);var n=i(4165),t=i(1413),o=i(5861),d=i(885),r=i(2791),a=i(3465),s=i(4569),u=i.n(s),c=i(5332),v=i(6638),p=i(408),h=i(6871),m=i(8781),f=i(3495),x=(i(161),i(6477),i(184));l.default=function(){var e=(0,a.Z)().auth,l=(0,h.s0)(),i=(0,r.useState)(""),s=(0,d.Z)(i,2),b=s[0],j=s[1],g=(0,r.useState)(""),N=(0,d.Z)(g,2),w=N[0],k=N[1],y={error:"rgb(255, 71, 86)",valid:"white"},Z=(0,r.useState)({image:"",url:""}),C=(0,d.Z)(Z,2),L=C[0],q=C[1],D=(0,r.useRef)(),I=(0,r.useState)({showloading:!1}),S=(0,d.Z)(I,2),U=S[0],B=S[1],E=(0,r.useCallback)((0,o.Z)((0,n.Z)().mark((function i(){var o,d,r,a,s,h;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),i.next=4,u().get("".concat(p.C,"/get-audios:").concat(null===(o=window.location.pathname)||void 0===o?void 0:o.split(":")[1]),{withCredentials:!0});case 4:200===(null===(d=i.sent)||void 0===d?void 0:d.status)&&(k(null===d||void 0===d||null===(r=d.data)||void 0===r?void 0:r.results),B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})}))),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),console.log(i.t0),null!==i.t0&&void 0!==i.t0&&null!==(a=i.t0.response)&&void 0!==a&&a.data?401===(null===i.t0||void 0===i.t0||null===(s=i.t0.response)||void 0===s?void 0:s.status)?(0,c.Z)(e).then((function(i){var n,t;200===i.status?E():l("/".concat(null===e||void 0===e||null===(n=e.stagenameInUrl)||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase(),"/sign-out"))})):(B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),(0,v.Z)(null===i.t0||void 0===i.t0||null===(h=i.t0.response)||void 0===h?void 0:h.status,j)):(B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})),j("Network challenges..."));case 12:case"end":return i.stop()}}),i,null,[[0,8]])}))),[e,l]);(0,r.useEffect)((function(){console.log("useEffect running"),E()}),[E]);var R=[],A=function(e){e&&!R.includes(e)&&R.push(e)},V=function(){var i=(0,o.Z)((0,n.Z)().mark((function i(){var o,d,r,a,s,h,m,x,b,g,N,Z;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(k((function(e){return(0,t.Z)((0,t.Z)({},e),{},{title:R[0].value,artWork:null===L||void 0===L?void 0:L.image,datereleased:R[2].value,applemusic:R[3].value,spotify:R[4].value,audiomack:R[5].value,youtube:R[6].value,soundcloud:R[7].value})})),""===w){i.next=33;break}if(o=0,d=0,r=0,a=!1,(s=new FormData).append("title",R[0].value),s.append("coverart",null===w||void 0===w?void 0:w.coverart),s.append("file",L.image),s.append("datereleased",R[2].value),s.append("applemusic",R[3].value),s.append("spotify",R[4].value),s.append("audiomack",R[5].value),s.append("youtube",R[6].value),s.append("soundcloud",R[7].value),s.append("uniqueId",null===w||void 0===w?void 0:w.uniqueId),R.forEach((function(e){if("req"===(null===e||void 0===e?void 0:e.className)&&(""===(null===e||void 0===e?void 0:e.value)?(o+=1,e.style.borderBottom="3px solid ".concat(y.error),"file"===(null===e||void 0===e?void 0:e.type)&&(""!==(null===L||void 0===L?void 0:L.image)&&""!==(null===L||void 0===L?void 0:L.url)||""!==(null===w||void 0===w?void 0:w.coverart)?(e.style.borderBottom="3px solid ".concat(y.valid),o-=1):e.style.borderBottom="3px solid ".concat(y.error))):e.style.borderBottom="3px solid ".concat(y.valid)),"streaminglink"===(null===e||void 0===e?void 0:e.className)&&""!==(null===e||void 0===e?void 0:e.value)){var l,i,n,t,s,u,c,v,p,h,m,x,b,g,N;if(d+=1,null!==e&&void 0!==e&&null!==(l=e.value)&&void 0!==l&&l.startsWith("https://")&&null!==(i=new URL(null===e||void 0===e||null===(t=e.value)||void 0===t?void 0:t.trim()))&&void 0!==i&&null!==(n=i.origin)&&void 0!==n&&n.toLowerCase().endsWith((null===e||void 0===e||null===(s=e.id)||void 0===s?void 0:s.toLowerCase())+".com")){try{var k;new URL(null===e||void 0===e||null===(k=e.value)||void 0===k?void 0:k.trim())}catch(Z){r+=1,e.style.borderBottom="3px solid ".concat(y.error),j("Invalid ".concat(null===e||void 0===e?void 0:e.id," URL proovided"))}0===!r&&(e.style.borderBottom="3px solid ".concat(y.valid))}else r+=1,e.style.borderBottom="3px solid ".concat(null===y||void 0===y?void 0:y.error),j("Invalid ".concat(null===e||void 0===e?void 0:e.id," URL proovided"));if("youtube"===(null===e||void 0===e?void 0:e.id))null!==e&&void 0!==e&&null!==(u=e.value)&&void 0!==u&&u.startsWith("https://")&&(null!==(c=new URL(null===e||void 0===e||null===(p=e.value)||void 0===p?void 0:p.trim()))&&void 0!==c&&null!==(v=c.origin)&&void 0!==v&&v.toLowerCase().endsWith((null===e||void 0===e||null===(h=e.id)||void 0===h?void 0:h.toLowerCase())+".com")||null!==(m=new URL(null===e||void 0===e?void 0:e.value))&&void 0!==m&&m.origin.endsWith(null===(x=(null===e||void 0===e||null===(b=e.id)||void 0===b||null===(g=b.toLowerCase())||void 0===g?void 0:g.slice(0,5))+"."+(null===e||void 0===e||null===(N=e.id)||void 0===N?void 0:N.trim().slice(5,8)))||void 0===x?void 0:x.trim()))||(r+=1)}"date"!==(null===e||void 0===e?void 0:e.type)&&"date"!==(null===e||void 0===e?void 0:e.id)||("Invalid Date"!==new Date("".concat(null===e||void 0===e?void 0:e.value))&&(0,f.qb)(null===e||void 0===e?void 0:e.value)?e.style.borderBottom="3px solid ".concat(null===y||void 0===y?void 0:y.valid):(a=!0,e.style.borderBottom="3px solid ".concat(null===y||void 0===y?void 0:y.error),j("Invalid date")))})),d<1&&j("Enter at least, one streamining platform link"),o>0&&j("Enter all required field"),!(d>0&&0===o&&0===r&&!1===a)){i.next=33;break}return B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!0})})),i.prev=22,i.next=25,u().patch("".concat(p.C,"/update-audios:").concat(null===w||void 0===w?void 0:w._id),s,{withCredentials:!0});case 25:200===(null===(h=i.sent)||void 0===h?void 0:h.status)&&l("/".concat(null===e||void 0===e||null===(m=e.stagenameInUrl)||void 0===m||null===(x=m.trim())||void 0===x?void 0:x.toLowerCase(),"/added-audios")),i.next=33;break;case 29:i.prev=29,i.t0=i.catch(22),null===(b=console)||void 0===b||b.log(i.t0),null!==i.t0&&void 0!==i.t0&&null!==(g=i.t0.response)&&void 0!==g&&g.data?401===(null===i.t0||void 0===i.t0||null===(N=i.t0.response)||void 0===N?void 0:N.status)?(0,c.Z)(e).then((function(i){var n,t;200===i.status?V():l("/".concat(null===e||void 0===e||null===(n=e.stagenameInUrl)||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase(),"/sign-out"))})):((0,v.Z)(null===i.t0||void 0===i.t0||null===(Z=i.t0.response)||void 0===Z?void 0:Z.status,j),B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})}))):(j("Network error..."),B((function(e){return(0,t.Z)((0,t.Z)({},e),{},{showloading:!1})})));case 33:case"end":return i.stop()}}),i,null,[[22,29]])})));return function(){return i.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(null===U||void 0===U?void 0:U.showloading)&&(0,x.jsx)(m.Z,{}),""!==w&&(0,x.jsxs)("main",{children:[(0,x.jsx)("div",{className:"feedback-container",style:b?{}:{backgroundColor:"transparent"},children:(0,x.jsxs)("div",{className:"feedback",children:[b,(0,x.jsx)("span",{style:{visibility:"hidden"},children:"."})]})}),(0,x.jsxs)("div",{className:"page-heading",children:["EDIT ",(0,x.jsx)("i",{children:(0,x.jsx)("b",{children:"AUDIO"})})]}),(0,x.jsx)("section",{className:"add-audios",children:(0,x.jsxs)("section",{className:"details",children:[(0,x.jsx)("div",{className:"image-container",children:(0,x.jsx)("img",{src:""!==(null===L||void 0===L?void 0:L.url)?L.url:null===w||void 0===w?void 0:w.coverart,alt:"select cover art less than 3mb"})}),(0,x.jsx)("form",{className:"form1",children:(0,x.jsx)("table",{children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{className:"required",children:[(0,x.jsx)("label",{children:"Title"})," ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"req",type:"text",placeholder:"Song title",ref:A,defaultValue:null===w||void 0===w?void 0:w.title})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{className:"required",children:[(0,x.jsx)("label",{children:"Art work "}),(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"req",type:"file",accept:".png,.jpeg,.svg,.jpg",ref:A,onChange:function(){R.forEach((function(e){var l;"file"===e.type&&(e.size>5242880?j("Image size too large"):0!==(null===e||void 0===e||null===(l=e.files)||void 0===l?void 0:l.length)&&q((function(l){return(0,t.Z)((0,t.Z)({},l),{},{url:URL.createObjectURL(e.files[0]),image:e.files[0]})})))}))}})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsxs)("td",{className:"required",children:[(0,x.jsx)("label",{children:"Date released"})," ",(0,x.jsx)("span",{children:"*"})]}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"req",id:"date",type:"date",placeholder:"YYYY-MM-DD",ref:A,defaultValue:w.datereleased})})]})]})})}),(0,x.jsx)("div",{className:"streaming-platforms-directive",children:"Add at least one streamning platform link"}),(0,x.jsx)("form",{className:"form2",children:(0,x.jsx)("table",{ref:D,children:(0,x.jsxs)("tbody",{children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("label",{children:"Apple music"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"streaminglink",id:"apple",type:"text",placeholder:"Apple music link",ref:A,defaultValue:null===w||void 0===w?void 0:w.applemusic})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("label",{children:"Spotify"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"streaminglink",id:"spotify",type:"text",placeholder:"Spotify link",ref:A,defaultValue:null===w||void 0===w?void 0:w.spotify})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("label",{children:"AudioMack"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"streaminglink",id:"audiomack",type:"text",placeholder:"AudioMack link",ref:A,defaultValue:null===w||void 0===w?void 0:w.audiomack})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("label",{children:"YouTube"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"streaminglink",id:"youtube",type:"text",placeholder:"YouTube link",ref:A,defaultValue:null===w||void 0===w?void 0:w.youtube})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("label",{children:"Soundcloud"})}),(0,x.jsx)("td",{children:(0,x.jsx)("input",{className:"streaminglink",id:"soundcloud",type:"text",placeholder:"Soundcloud link",ref:A,defaultValue:null===w||void 0===w?void 0:w.soundcloud})})]}),(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{className:"btn-container",children:(0,x.jsx)("button",{onClick:function(e){e.preventDefault(),V()},children:"Save"})}),(0,x.jsx)("td",{className:"btn-container",children:(0,x.jsx)("button",{onClick:function(i){var n,t;i.preventDefault(),l("/".concat(null===e||void 0===e||null===(n=e.stagenameInUrl)||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase(),"/added-audios"))},children:"Cancel"})})]})]})})})]})})]})]})}},161:function(){}}]);
//# sourceMappingURL=779.eb644fb0.chunk.js.map